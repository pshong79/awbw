<%= simple_form_for(@community_news, html: { class: "space-y-8" }) do |f| %>
  <%= f.hidden_field :created_by_id, value: f.object.created_by_id || current_user&.id %>
  <%= f.hidden_field :updated_by_id, value: current_user&.id %>

  <%= render 'shared/errors', resource: @community_news if @community_news.errors.any? %>

  <!-- Content Section -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <%= f.input :title, as: :text, input_html: { rows: 1, class: "w-full" } %>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <%= f.input :published, as: :boolean, wrapper_html: { class: "flex items-center" } %>
      <%= f.input :featured, as: :boolean, wrapper_html: { class: "flex items-center" } %>
    </div>
  </div>

  <%= rhino_editor(f, :body, label: "Body / Description") %>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
    <%= f.input :youtube_url, as: :text,
                label: "YouTube URL",
                input_html: { rows: 1, class: "w-full" } %>

    <%= f.input :reference_url, as: :text,
                label: "Reference URL",
                input_html: { rows: 1, class: "w-full" } %>
  </div>

  <!-- Associations -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <%= f.input :project_id,
                as: :select,
                label: "Organization",
                required: false,
                collection: @organizations,
                selected: f.object.project_id,
                input_html: { class: "block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" } %>

    <%= f.input :windows_type_id,
                as: :select,
                required: false,
                include_blank: true,
                collection: @windows_types, label_method: :short_name, value_method: :id,
                selected: f.object.windows_type_id,
                input_html: { class: "block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" } %>

    <%= f.input :author_id,
                as: :select,
                label: "Display author",
                required: true,
                collection: @authors,
                selected: f.object.author_id ||
                  User.where("first_name like 'awbw%' or last_name like 'awbw%'").last&.id,
                input_html: { class: "block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" } %>
  </div>

  <%= render "shared/form_image_fields", f: f, include_primary_asset: true %>

  <!-- Actions -->
  <div class="flex flex-wrap gap-3 mt-6 justify-end">
    <% if @community_news.persisted? && current_user&.super_user? %>
      <%= link_to "Delete", @community_news, method: :delete,
                  data: { confirm: "Are you sure?" },
                  class: "btn btn-danger-outline" %>
    <% end %>

    <%= link_to "Cancel", community_news_index_path,
                class: "inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 rounded-lg transition" %>

    <%= f.button :submit, class: "inline-flex items-center px-5 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg shadow-sm transition" %>
  </div>
<% end %>

