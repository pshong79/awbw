<div class="bg-gray-50 rounded p-6">
  <div class="flex flex-col mt-6">

  <!-- Header with User Dropdown -->
  <div class="flex items-center space-x-2 text-2xl font-semibold text-gray-700 mb-8">
    <span>Recent Activity for</span>

    <% if current_user.super_user? %>
      <%= form_with url: request.path, method: :get, local: true, html: { class: "inline-block" } do %>
        <%= select_tag :user_id,
                       options_from_collection_for_select(
                         User.active.order(:first_name, :last_name),
                         :id, :full_name, params[:user_id] || @user.id
                       ),
                       include_blank: "All Users",
                       class: "border border-gray-300 admin-only bg-blue-100 rounded-md px-2 py-1
                 focus:outline-none focus:ring-1 focus:ring-indigo-500",
                       onchange: "this.form.submit()" %>
      <% end %>
    <% else %>
      <%= @user.full_name %>
    <% end %>
  </div>


  <!-- TABLE HEADER ONLY -->
  <div class="overflow-x-auto mb-2">
    <table class="min-w-full border border-gray-200 rounded-lg shadow-sm">
      <thead class="bg-gray-50">
      <tr>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Date</th>
        <th class="px-6 py-3 text-left text-start text-xs font-medium text-gray-500 uppercase"
            colspan="5">Activity</th>
      </tr>
      </thead>
    </table>
  </div>


  <!-- CARD ROWS UNDER HEADER -->
  <div class="space-y-4">

    <% @recent_activities.each do |activity| %>
      <div class="border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition p-0">
        <%= render "recent_activity", activity: activity %>
      </div>
    <% end %>

  </div>


  <!-- Pagination -->
  <div class="pagination flex justify-center mt-8">
    <%= tailwind_paginate @recent_activities %>
  </div>

</div>
</div>