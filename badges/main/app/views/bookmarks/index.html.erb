<div class="min-h-screen py-10">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="admin-only bg-blue-100 rounded p-6">
      <div class="<%= DomainTheme.bg_class_for(:bookmarks) %>
      border border-gray-200 rounded-xl shadow p-6">
        <h1 class="text-2xl font-semibold text-gray-900 mb-4">Bookmarks (<%= @bookmarks_count %>)</h1>
        <div class="border-b border-gray-300 mb-6"></div>
        <div class="mt-4 pt-4">

          <!-- Filter form -->
          <%= render "search_boxes" %>

          <!-- Bookmarks list -->
          <% if @bookmarks.any? %>
            <div class="overflow-x-auto">
              <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                <thead>
                <tr class="bg-gray-100">
                  <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700">ID</th>
                  <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700">User</th>
                  <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700">Type</th>
                  <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700">Title</th>
                  <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700">Created At</th>
                  <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700">Bookmark count</th>
                </tr>
                </thead>

                <tbody class="divide-y divide-gray-200">
                <% @bookmarks.each do |bookmark| %>
                  <% item = bookmark.bookmarkable %>
                  <tr class="hover:bg-gray-50">
                    <td class="px-4 py-2"><%= bookmark.id %></td>
                    <td class="px-4 py-2"><%= bookmark.user&.full_name %></td>
                    <td class="px-4 py-2"><%= bookmark.bookmarkable_type %></td>
                    <td class="px-4 py-2">
                      <%= link_to item.title, polymorphic_path(item), class: "text-blue-600 hover:underline" %>
                    </td>
                    <td class="px-4 py-2"><%= bookmark.created_at.strftime("%b %d, %Y %H:%M") %></td>
                    <td class="px-4 py-2"><%= bookmark.bookmarkable.bookmarks_count %></td>
                  </tr>
                <% end %>
                </tbody>
              </table>
            </div>

            <!-- Pagination -->
            <div class="mt-6 flex justify-center">
              <div class="pagination mt-6">
                <%= tailwind_paginate @bookmarks %>
              </div>
            </div>
          <% else %>
            <p class="text-gray-600">No bookmarks found.</p>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
    // Search icon click
    document.querySelectorAll('.fa-search').forEach(icon => {
        icon.closest('div').addEventListener('click', () => {
            icon.closest('form').submit();
        });
    });

    // Category checkboxes submit on change
    document.addEventListener("DOMContentLoaded", function() {
        document.querySelectorAll(".category-checkbox").forEach(function(checkbox) {
            checkbox.addEventListener("change", function() {
                this.form.submit();
            });
        });
    });
</script>
