<div class="relative">
  <!-- BOOKMARK ICON -->
  <div class="absolute top-3 right-3 z-30">
    <%= render "bookmarks/editable_bookmark_icon", resource: resource.object %>
  </div>

  <!-- CARD -->
  <div
    class="
      flex flex-row flex-wrap
      bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md
      transition-all overflow-hidden
    "
  >
    <!-- LEFT SIDE -->
    <div
      class="
        flex-shrink-0
        w-40 md:w-40
        flex flex-col items-center text-center justify-center py-4 pb-3 px-3
        border-b md:border-b-0 md:border-r border-gray-200
      "
    >
      <!-- IMAGE -->
      <div class="relative w-32 h-32">
        <%= link_to resource_path(resource),
                    data: { turbo_frame: "_top", turbo_prefetch: false },
                    class: "block w-full h-full" do %>
          <!-- fallback icon -->
          <div class="absolute inset-0 flex items-center justify-center text-gray-700 resource-icon">
            <%= render "resources/resource_icon", kind: resource.kind %>
          </div>

          <%= render "assets/display_image",
                     resource: resource.object,
                     width: "32", height: "32",
                     link: false,
                     link_to_object: false,
                     file: resource.display_image %>
        <% end %>
      </div>

      <!-- TYPE -->
      <span class="mt-2 text-xs font-medium text-gray-500 uppercase tracking-wide"><%= resource.kind_display %></span>
    </div>

    <!-- RIGHT SIDE -->
    <div class="flex-1 min-w-0 pl-4 pr-10 pb-12 mt-2 relative">
      <div class="mt-3 mb-2">
        <%= link_to resource_path(resource),
                    data: { turbo_frame: "_top", turbo_prefetch: false },
                    class: "inline-flex min-w-0 max-w-full text-lg font-semibold
                            text-gray-900 leading-tight hover:underline" do %>
          <%= title_with_badges(resource, show_hidden_badge: current_user&.super_user?).html_safe %>
        <% end %>
      </div>

      <!-- ACTION BUTTONS -->
      <div class="absolute bottom-3 right-3 flex items-center space-x-2 z-30">
        <% if resource.downloadable_asset&.file&.attached? %>
          <%= link_to(
                content_tag(:span, "", class: "fa fa-download"),
                resource_download_path(resource.object),
                data: { turbo: false, turbo_prefetch: false },
                class: "btn btn-utility"
              ) %>
        <% end %>

        <% if controller_name == "resources" &&  allowed_to?(:edit?, resource) %>
          <%= link_to(
                content_tag(:span, "", class: "far fa-edit"),
                edit_resource_path(resource.object),
                class: "admin-only bg-blue-100 btn btn-secondary-outline",
                data: {turbo_frame: "_top", turbo_prefetch: false }
              ) %>
        <% end %>
      </div>
    </div>
  </div>
</div>
