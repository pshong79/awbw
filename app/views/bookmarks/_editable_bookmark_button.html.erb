<% resource = Draper.undecorate(resource) %>

<%= tag.span id: dom_id(resource, :bookmark_button) do %>
  <% if resource.bookmarks.any? { |b| b.user_id == current_user.id } %>
    <%= link_to bookmark_path(current_user.bookmark_for(resource)),
                    class: "inline-flex items-center gap-2 px-4 py-2
         border border-gray-500 text-primary rounded-lg
         hover:bg-primary hover:text-white transition-colors duration-200
         font-medium shadow-sm leading-none",
                    data: { turbo_method: :delete, turbo_confirm: "Remove bookmark?" } do %>
      <i class="fas fa-bookmark text-base flex-shrink-0"></i>
      <span class="leading-none text-sm py-[2.75px]">Bookmarked</span>
    <% end %>
  <% else %>
    <%= button_to bookmarks_path(bookmark: { bookmarkable_id: resource.id, bookmarkable_type: resource.class.name }),
                    class: "inline-flex items-center gap-2 px-4 py-2
         border border-gray-500 text-primary rounded-lg
         hover:bg-primary hover:text-white transition-colors duration-200
         font-medium shadow-sm leading-none" do %>
      <i class="far fa-bookmark text-base flex-shrink-0"></i>
      <span class="leading-none text-sm py-[2.75px]">Bookmark</span>
    <% end %>
  <% end %>
<% end %>
